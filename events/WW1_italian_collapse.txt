add_namespace = garibaldi

#Victor Emmannuel abdicates
country_event = {
	id = garibaldi.1
	title = garibaldi.1.t
	desc = garibaldi.1.d
	fire_only_once = yes
	trigger = {
		tag = ITA
		has_global_flag = versallies_treaty
		has_country_flag = great_war_loser
	}
	option = {
		name = garibaldi.1.a
		retire_ideology_leader = neutrality
		set_politics = {
			ruling_party = democratic
		}
		hidden_effect = {
			news_event = { id = garibaldi.2 hours = 1 }
			country_event = { id = garibaldi.3 days = 6}
		}
	}
}
#Victor abdication news event
news_event = {
	id = garibaldi.2
	title = garibaldi.2.t
	desc = garibaldi.2.d
	picture = GFX_news_event_saf_civil_war
	major = yes
	is_triggered_only = yes
	option = {
		name = garibaldi.2.a
	}
}
#Southern Monarchists declare restoration of the monarchy
country_event = {
	id = garibaldi.3
	title = garibaldi.3.t
	desc = garibaldi.3.d
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = garibaldi.3.a
		add_stability = -0.1
		create_country_leader = { 
			name = "Xavier I"
			picture = "gfx/leaders/ITA/ITA_xavier_of_bourbon_parma.dds" 
			expire="1935.1.1" 
			ideology = despotism
			traits = { } 
		}
		hidden_effect = {
			country_event = { id = garibaldi.4 days = 1 }
		}
	}
}
#Socialists declare Italian Commune
country_event = {
	id = garibaldi.4
	title = garibaldi.4.t
	desc = garibaldi.4.d
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = garibaldi.4.a
		add_stability = -0.05
		hidden_effect = { country_event = { id = garibaldi.5 hours = 3 } }
	}
}
#ANI allies with monarchists
country_event = {
	id = garibaldi.5
	title = garibaldi.5.t
	desc = garibaldi.5.d
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = garibaldi.5.a
		add_stability = -0.01
		hidden_effect = { country_event = { id = garibaldi.6 days = 7 } }
		ADU = { #unused tag, I thought Sardinia had its own tag but it doesn't XD well I doubt we'll be using Andalusia for anything significant in the near future
			add_state_core = 114
			add_state_core = 115
			add_state_core = 156
			add_state_core = 117
			add_state_core = 157
			add_state_core = 2
			add_state_core = 162
			add_state_core = 161
			add_state_core = 160
			add_state_core = 159
			add_state_core = 158
			add_state_claim = 736
			add_state_claim = 103
			add_state_claim = 163
		}
	}
}
#Italy fragments
country_event = {
	id = garibaldi.6
	title = garibaldi.6.t
	desc = garibaldi.6.d
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_completed_focus = ITA_vittoria_mutilata
					}
				}
				complete_national_focus = ITA_vittoria_mutilata
			}
			if = {
				limit = {
					NOT = {
						OR = {
							has_completed_focus = ITA_fascismo_movimento
							has_completed_focus = ITA_support_socialist_movenment
						}
					}
				}
				complete_national_focus = ITA_support_socialist_movenment
			}
			add_state_claim = 736
			add_state_claim = 103
			add_state_claim = 163
			set_politics = {
				ruling_party = communism
			}
			set_capital = 161
			add_popularity = { ideology = communism popularity = 0.65 }
			ADU = {
				inherit_technology = ITA
				transfer_state = 114
				transfer_state = 158
				transfer_state = 115
				transfer_state = 156
				transfer_state = 117
				transfer_state = 2
			}
			transfer_units_fraction= {
    			target = ADU
    			size = 0.5
    			stockpile_ratio = 0.5
    			army_ratio = 0.6
    			navy_ratio = 0.4
    			air_ratio = 0.5
			}
			news_event = { id = garibaldi.7 hours = 1 }
		}
	}
	#stay as communists
	option = {
		name = garibaldi.6.a
		ai_chance = { factor = 100 }
	}
	#Viva Italia
	option = {
		name = garibaldi.6.b
		ai_chance = { factor = 0 }
		ADU = { change_tag_from = ROOT }
	}
}
#Italy fragmentation news event
news_event = {
	id = garibaldi.7
	title = garibaldi.7.t
	desc = garibaldi.7.d
	is_triggered_only = yes
	picture = GFX_news_event_fascist_militia
	major = yes
	option = {
		name = garibaldi.7.a
	}
}